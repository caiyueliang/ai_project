# 前端开发规范（React / TypeScript）

## 目标
- 可维护：页面逻辑与数据请求解耦
- 可扩展：策略、图表、筛选组件可复用
- 体验一致：统一加载/错误处理、统一交互模式

## 目录与职责（当前结构）
- `src/pages/`：页面级组件（路由入口）
- `src/layouts/`：布局（侧边栏、内容区）
- `src/services/api.ts`：API 封装（按资源拆分导出函数）
- `src/utils/request.ts`：Axios 实例与拦截器（统一注入 token）
- `src/utils/cache.ts`：本地缓存（TTL）
- `src/components/`：通用组件

## 接口对接规范
- 所有请求函数放 `src/services/api.ts`
- 页面只调用 services，不直接写 axios
- Token 统一由 `request.ts` 注入 `Authorization`

## 缓存与分页
- 列表页：按查询参数生成 cacheKey，短 TTL（例如 30s），减少重复刷新
- 详情页：按资源 id/code 缓存，TTL 可稍长（例如 60s）
- 分页：与后端保持一致使用 `skip/limit`

## 组件与状态
- 简单页面使用 `useState/useEffect`
- 复杂状态（例如回测工作流、跨页面对比）建议引入 `zustand`（已在依赖中）

## 可视化
- 图表统一封装 option 构造函数
- X 轴时间序列必须排序后再渲染（避免数据源乱序）

## 错误处理
- 页面级别 `message.error(...)`
- 对于权限 401/403：后续可在 `request.ts` 拦截并统一跳转 `/login`

