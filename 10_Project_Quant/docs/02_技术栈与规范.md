# 技术栈与开发规范

## 强制技术栈（与当前代码保持一致）
- **后端语言**：Python 3.11
- **后端框架**：FastAPI 0.104.x
- **ORM**：SQLAlchemy 2.x
- **数据校验**：Pydantic 2.x
- **数据库**：
  - 默认生产：MySQL 8（Docker Compose）
  - 本地开发：SQLite（默认 `DATABASE_URL` 未设置时启用）
- **缓存/队列（预留）**：Redis 7.2（已在 compose 中提供）
- **前端框架**：React 18 + TypeScript
- **前端构建**：Vite 6
- **UI**：Ant Design 6
- **可视化**：ECharts 6 + `echarts-for-react`
- **HTTP**：Axios
- **容器化**：Docker + Docker Compose
- **测试**：
  - 后端：pytest
  - 前端：TypeScript `tsc -b --noEmit`

## 代码仓库与目录结构（当前实际结构）
```
project-root/
  api/                 # FastAPI 后端包（以 api.* 作为导入路径）
  src/                 # React 前端代码
  docs/                # 项目知识库（本目录）
  docker-compose.yml
  Dockerfile.dev       # 前端开发容器
```

## 编码规范（强约束）
- **Python**：遵循 PEP8；新增模块/函数必须包含清晰 docstring（业务代码建议中文注释）。
- **TypeScript/React**：组件/Hook/工具函数按目录职责归类；避免在页面直接写大量业务逻辑。
- **配置外部化**：所有环境差异通过环境变量控制：
  - 后端：`DATABASE_URL`、`SECRET_KEY`
  - 前端：`VITE_API_URL`

## 运行约定（避免常见坑）
- 后端采用包导入（`from .xxx import ...`），因此：
  - **本地启动**：在项目根目录运行 `uvicorn api.main:app ...`
  - **容器启动**：同样使用 `uvicorn api.main:app ...`

