# 项目架构与愿景

## 项目概述
- **项目名称**：基金量化回测平台（Fund Quant Platform）
- **核心业务价值**：为基金投资研究提供“数据管理 + 策略回测 + 结果可视化 + 历史对比”的一体化工作台。
- **主要用户**：
  - 普通用户：查看基金数据、运行基础回测、查看个人历史
  - 高级用户：组合回测、策略对比、导出报告
  - 管理员：用户/权限、数据同步、监控告警

## 系统架构

### 架构图
```mermaid
graph TD
  U[浏览器] --> FE[前端 React + TS + Ant Design]
  FE -->|REST API| BE[后端 FastAPI]
  BE --> DB[(MySQL / SQLite)]
  BE --> REDIS[(Redis)]
  BE --> EXT[外部数据源(东方财富/其他)]
  
  subgraph Frontend
    FE
  end
  subgraph Backend
    BE
  end
  subgraph Storage
    DB
    REDIS
  end
  subgraph DataSource
    EXT
  end
```

### 核心模块
1. **用户与权限**：登录认证（JWT）、管理员能力（用户管理、数据同步）。
2. **基金数据**：基金列表、基金详情（含历史净值曲线）、数据同步（手动/定时）。
3. **回测引擎**：网格交易策略参数配置、回测执行、结果指标与曲线展示、历史记录。
4. **运维能力**：容器化部署（Docker Compose）、健康检查、日志与可观测性（规划）。

### 数据流（典型路径）
- **基金列表/详情**：浏览器请求 → 前端页面 → `/api/funds` → 数据库读取（必要时从净值表聚合最新值/涨跌幅）→ 前端渲染（表格/图表）。
- **净值同步**：前端触发同步 → `/api/funds/sync?days=N` → 后端调用外部数据源 → 解析并写入 `fund_navs` → 前端刷新看到曲线与指标。
- **回测执行**：前端提交回测参数 → `/api/backtest/run` → 回测执行（当前为基础实现，后续可引入异步任务队列）→ 保存结果/信号 → 前端展示。

## 核心设计原则
1. **前后端分离**：所有能力通过 REST API 暴露，前端只做展示与交互。
2. **数据可追溯**：同步、回测均可追踪（日志/任务记录），结果可复现。
3. **可扩展**：基金数据源可替换；回测策略可扩展；数据库可切换 MySQL/SQLite。
4. **安全默认**：认证/鉴权优先落地；敏感配置只通过环境变量注入。

